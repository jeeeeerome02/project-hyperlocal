@tailwind base;
@tailwind components;
@tailwind utilities;

/* mapbox-gl CSS is imported in MapViewInner.tsx (only when token is present) */

/* ─── 2026 Enterprise Design System — HyperLocal ─── */

@layer base {
  :root {
    --primary: #8B5CF6;
    --primary-dark: #7C3AED;
    --primary-light: #A78BFA;
    --accent: #D946EF;
    --accent-warm: #FF6B35;

    --bg: #F8FAFC;
    --bg-secondary: #FFFFFF;
    --bg-tertiary: #F1F5F9;
    --bg-elevated: #FFFFFF;
    --bg-card: rgba(255, 255, 255, 0.85);
    --bg-sidebar: #FFFFFF;

    --text-primary: #0F172A;
    --text-secondary: #475569;
    --text-tertiary: #94A3B8;
    --text-inverse: #FFFFFF;

    --border: #E2E8F0;
    --border-light: #F1F5F9;
    --border-focus: #8B5CF6;

    --glass-border: rgba(255, 255, 255, 0.6);
    --glass-bg: rgba(255, 255, 255, 0.75);

    --shadow-color: rgba(0, 0, 0, 0.04);
    --shadow-color-lg: rgba(0, 0, 0, 0.08);

    --sidebar-width: 280px;
    --header-height: 64px;
    --bottomnav-height: 80px;
  }

  .dark {
    --bg: #0B0F1A;
    --bg-secondary: #111827;
    --bg-tertiary: #1E293B;
    --bg-elevated: #1E293B;
    --bg-card: rgba(30, 41, 59, 0.7);
    --bg-sidebar: #111827;

    --text-primary: #F1F5F9;
    --text-secondary: #94A3B8;
    --text-tertiary: #64748B;
    --text-inverse: #0F172A;

    --border: #1E293B;
    --border-light: #1E293B;
    --border-focus: #A78BFA;

    --glass-border: rgba(255, 255, 255, 0.06);
    --glass-bg: rgba(255, 255, 255, 0.03);

    --shadow-color: rgba(0, 0, 0, 0.2);
    --shadow-color-lg: rgba(0, 0, 0, 0.3);
  }

  html {
    scroll-behavior: smooth;
    -webkit-tap-highlight-color: transparent;
  }

  body {
    background-color: var(--bg);
    color: var(--text-primary);
    overscroll-behavior: none;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Headings use display font */
  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-jakarta), var(--font-inter), system-ui, sans-serif;
  }
}

/* ─── Glassmorphism utilities ─── */
@layer components {
  .glass {
    background: var(--glass-bg);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid var(--glass-border);
  }

  .glass-strong {
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(40px);
    -webkit-backdrop-filter: blur(40px);
    border: 1px solid rgba(255, 255, 255, 0.6);
  }

  .dark .glass-strong {
    background: rgba(17, 24, 39, 0.85);
    border: 1px solid rgba(255, 255, 255, 0.08);
  }

  /* ─── Sidebar styling ─── */
  .sidebar-nav-item {
    @apply flex items-center gap-3 px-4 py-2.5 rounded-xl text-sm font-medium
           transition-all duration-200 cursor-pointer select-none;
  }

  .sidebar-nav-item:hover {
    @apply bg-gray-100 dark:bg-white/5;
  }

  .sidebar-nav-item.active {
    @apply bg-primary-50 text-primary-700 dark:bg-primary-500/10 dark:text-primary-400;
  }

  /* ─── Card component ─── */
  .card {
    @apply bg-white dark:bg-gray-800/60 rounded-2xl border border-gray-100 dark:border-gray-700/50
           shadow-sm transition-all duration-200;
  }

  .card:hover {
    @apply shadow-elevated;
  }

  .card-glass {
    background: var(--bg-card);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    @apply rounded-2xl border border-white/50 dark:border-white/10;
  }

  /* ─── Button variants ─── */
  .btn-primary {
    @apply inline-flex items-center justify-center gap-2 px-5 py-2.5 rounded-xl
           font-semibold text-sm text-white
           bg-gradient-to-r from-violet-600 via-fuchsia-500 to-violet-600
           bg-[length:200%_100%] bg-left
           shadow-lg shadow-primary-500/20
           hover:bg-right hover:shadow-primary-500/30
           active:scale-[0.98]
           transition-all duration-300 ease-out
           disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-secondary {
    @apply inline-flex items-center justify-center gap-2 px-5 py-2.5 rounded-xl
           font-semibold text-sm
           bg-gray-100 dark:bg-white/5 text-gray-700 dark:text-gray-300
           hover:bg-gray-200 dark:hover:bg-white/10
           active:scale-[0.98]
           transition-all duration-200;
  }

  .btn-ghost {
    @apply inline-flex items-center justify-center gap-2 px-4 py-2 rounded-xl
           font-medium text-sm text-gray-500 dark:text-gray-400
           hover:bg-gray-100 dark:hover:bg-white/5 hover:text-gray-700 dark:hover:text-gray-200
           transition-all duration-200;
  }

  /* ─── Input styling ─── */
  .input {
    @apply w-full px-4 py-3 rounded-xl text-sm
           bg-gray-50 dark:bg-gray-800/50
           border border-gray-200 dark:border-gray-700
           text-gray-900 dark:text-white
           placeholder:text-gray-400 dark:placeholder:text-gray-500
           focus:outline-none focus:ring-2 focus:ring-primary-500/30 focus:border-primary-500
           transition-all duration-200;
  }

  /* ─── Category pill styles ─── */
  .category-pill {
    @apply px-3 py-1.5 text-sm font-medium transition-all duration-200 whitespace-nowrap;
    border-radius: 24px;
  }

  .category-pill.active {
    @apply text-white shadow-sm;
  }

  .category-pill.inactive {
    @apply bg-white/80 text-gray-600 border border-gray-200;
  }
}

/* ─── Layout utilities ─── */
@layer utilities {
  /* Gradient mesh background */
  .mesh-gradient {
    background:
      radial-gradient(ellipse at 20% 0%, rgba(139, 92, 246, 0.06) 0%, transparent 50%),
      radial-gradient(ellipse at 80% 20%, rgba(217, 70, 239, 0.04) 0%, transparent 40%),
      radial-gradient(ellipse at 40% 80%, rgba(255, 107, 53, 0.03) 0%, transparent 40%),
      var(--bg);
  }

  /* Hide scrollbar but allow scrolling */
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  /* Gradient text utility */
  .gradient-text {
    background: linear-gradient(135deg, #8B5CF6, #D946EF, #FF6B35);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  /* Subtle grid pattern */
  .grid-pattern {
    background-image:
      linear-gradient(rgba(139, 92, 246, 0.02) 1px, transparent 1px),
      linear-gradient(90deg, rgba(139, 92, 246, 0.02) 1px, transparent 1px);
    background-size: 32px 32px;
  }

  /* Desktop content area offset for sidebar */
  .desktop-offset {
    @apply lg:ml-[280px];
  }

  /* iOS-style safe area for bottom nav */
  .safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom, 0);
  }
}

/* ─── Map container fills viewport ─── */
.map-container {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 0;
}

/* ─── Custom mapbox popup styling ─── */
.mapboxgl-popup-content {
  border-radius: 16px !important;
  padding: 0 !important;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08) !important;
  border: 1px solid rgba(255, 255, 255, 0.3) !important;
  backdrop-filter: blur(20px) !important;
}

/* ─── Bottom sheet animation ─── */
.bottom-sheet {
  @apply fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-900 rounded-t-3xl shadow-2xl z-40
         transition-transform duration-300 ease-out;
}

/* ─── Pulsing location dot ─── */
@keyframes pulse-ring {
  0% { transform: scale(0.5); opacity: 1; }
  100% { transform: scale(2.5); opacity: 0; }
}

.pulse-dot::before {
  content: '';
  position: absolute;
  width: 100%;
  height: 100%;
  border-radius: 50%;
  background: var(--primary);
  animation: pulse-ring 2s ease-out infinite;
}

/* ─── Fade-in animation for pins ─── */
@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(8px) scale(0.95); }
  to { opacity: 1; transform: translateY(0) scale(1); }
}

.pin-enter {
  animation: fadeInUp 0.3s ease-out;
}

/* ─── Countdown timer styles ─── */
.countdown {
  @apply text-xs font-mono;
}

.countdown.urgent {
  @apply text-red-500 font-bold animate-pulse;
}

/* ─── Custom scrollbar for desktop ─── */
@media (min-width: 1024px) {
  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
  }
  .custom-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }
  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(139, 92, 246, 0.15);
    border-radius: 3px;
  }
  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(139, 92, 246, 0.3);
  }
}
